<div class="surface-ground px-4 py-8 md:px-6 lg:px-8">
    <div class="text-center mb-6 fadein animation-duration-1000">
        <h2 class="text-4xl font-bold text-900 mb-2 font-serif text-primary">Sebastião Tapajós</h2>
        <span class="text-xl text-600">A jornada do Pescador de Sons através do tempo</span>
    </div>

    <p-timeline [value]="events" align="left" styleClass="customized-timeline">
        <ng-template pTemplate="marker" let-event>
            <span class="custom-marker shadow-2 p-2">
                <i class="pi pi-bolt text-white"></i> </span>
        </ng-template>

        <ng-template pTemplate="content" let-event>
            <div pAnimateOnScroll enterClass="fadein" leaveClass="fadeout" class="animation-duration-1000 animation-ease-in-out">
                <p-card [header]="event.titulo" [subheader]="event.subtitulo" styleClass="shadow-4 border-round-xl mb-4 card-timeline">
                    
                    <ng-template pTemplate="header" *ngIf="event.midia && isImage(event.midia)">
                        <img [src]="event.midia" alt="{{ event.titulo || 'Imagem da biografia' }}" title="{{ event.titulo || 'Imagem da biografia' }}" class="border-round-top-xl w-full timeline-image" />
                    </ng-template>

                    <div class="line-height-3 text-700 mb-3 text-justify">
                        {{ event.descricao }}
                    </div>

                    <ng-template pTemplate="footer">
                        <div class="text-sm text-500 border-top-1 pt-2 mt-3" [class.border-transparent]="!event.midia">
                            <div *ngIf="event.midia && isYoutube(event.midia)" class="relative w-full mb-3" style="padding-bottom: 56.25%; height: 0; overflow: hidden;">
                                <iframe [src]="getSafeUrl(event.midia)" class="absolute top-0 left-0 w-full h-full border-round-xl" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            <span class="white-space-nowrap" [innerHTML]="event.footer"></span>
                        </div>
                    </ng-template>
                </p-card>
            </div>
        </ng-template>

        <ng-template pTemplate="opposite" let-event>
            <span class="text-2xl font-bold text-primary font-serif">{{ event.ano }}</span>
        </ng-template>
    </p-timeline>

    <div *ngIf="loading" class="text-center mt-4">
        <i class="pi pi-spin pi-spinner text-4xl text-primary"></i>
        <p class="text-600">Carregando história...</p>
    </div>
    
    <div *ngIf="allLoaded" class="text-center mt-6 text-500 italic">
        "A música não tem fim..." - Fim dos registros atuais.
    </div>
</div>
